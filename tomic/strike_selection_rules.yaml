# =========================
# TOMIC strike_selection_rules.yaml
# Per strategie selectie- en bouwregels (gealigneerd met criteria/vol-rules)
# =========================

# Debug: gebruik `--show-filter-stats` of `EXPLAIN_FILTERS=true` om te zien
# hoeveel strikes per regel afvallen.

default:
  method: spot_distance
  delta_range: [-1.0, 1.0]
  dte_range: [20, 60]
  max_strikes: 100

iron_condor:
  method: stddev_range
  stddev_range: 1.5              # realistischer credit dan 2.5σ
  dte_range: [25, 55]
  min_rom: 0.10                  # matcht criteria.strike.min_rom
  #iv_rank_min: 0.50              # align met portfolio.condor_gates & vol-rules
  #max_skew: 0.25                 # cap op extreme skew (units afhankelijk van jouw metriek)
  min_risk_reward: 1.5           # TOMIC-beleid al in selectie
  wing_width: [5, 15]

atm_iron_butterfly:
  method: spot_distance
  dte_range: [20, 35]
  min_rom: 0.10
  #iv_rank_min: 0.25              # vol-rules laten tot 0.30 toe → 0.25–0.30 is sweet spot
  #max_skew: 0.25
  wing_width: [3, 10]

short_put_spread:
  method: delta
  short_delta_range: [-0.35, -0.18]   # signed delta (puts negatief); gebruik abs() indien nodig
  dte_range: [25, 50]
  min_rom: 0.10
  #iv_rank_min: 0.50                   # align met vol-rules (hogere IV vereist)
  #max_skew: 0.25
  min_risk_reward: 0.4
  long_leg_distance: [2, 7]

short_call_spread:
  method: delta
  short_delta_range: [0.15, 0.35]
  dte_range: [25, 50]
  min_rom: 0.10
  #iv_rank_min: 0.50                   # align met vol-rules
  #max_skew: 0.25
  min_risk_reward: 0.6
  long_leg_distance: [2, 7]

naked_put:
  method: delta
  short_delta_range: [-0.30, -0.20]
  dte_range: [25, 45]
  min_rom: 0.10
  #iv_rank_min: 0.50                   # align met vol-rules
  # geen wing_distance nodig

calendar:
  method: spot_distance
  strike_distance: 0                  # ATM bias
  dte_range: [20, 80]
  expiry_gap_min: 10
  #iv_rank_max: 0.40                   # align met portfolio.calendar_gates & vol-rules
  #iv_percentile_max: 0.40
  #max_skew: 0.25
  require_term_compression: true      # align met gate (term_m1_m3 ≤ 0)

ratio_spread:
  method: delta
  short_delta_range: [0.25, 0.45]
  dte_range: [20, 45]
  #iv_rank_min: 0.30                   # align met vol-rules (0.3–0.6)
  require_skew: true
  #min_skew: 5.0                       # align met vol-rules (units zoals in jouw skew-metriek)
  allow_extra_wings: true

backspread_put:
  method: delta
  short_delta_range: [0.10, 0.25]     # gebruik abs(delta) in code als je puts negatief rekent
  dte_range: [25, 45]
  #iv_rank_max: 0.40                   # align met vol-rules
  #iv_percentile_max: 0.40
  #skew_max: -2.0                      # vereis duidelijke put-skew (negatief)
  min_risk_reward: 0.6
  require_term_compression: true
  ratio: "1x short / 2x long"
